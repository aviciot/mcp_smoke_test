# MCP Smoke Test Configuration
# ============================

# MCP Configuration
mcp:
  name: "mcp-smoke"
  description: "Smoke Test MCP Server for comparing CSV files, database exports, and StorageGrid documents"

# Server Configuration
server:
  version: "1.0.0"
  host: "0.0.0.0"
  port: 8200  # Set MCP_PORT in .env to override
  
  # Authentication Configuration
  authentication:
    enabled: true  # Set AUTH_ENABLED in .env to override
    
    # API Keys with Role-Based Access Control
    # Generate secure keys: python -c "import secrets; print(secrets.token_urlsafe(32))"
    api_keys:
      - name: "admin"
        key: "${ADMIN_API_KEY}"
        role: "admin"
        description: "Administrator - full access to all tools"
      
      - name: "dba"
        key: "${DBA_API_KEY}"
        role: "dba"
        description: "DBA - database export tools only"
      
      - name: "user"
        key: "${USER_API_KEY}"
        role: "user"
        description: "Standard user - smoke test and comparison tools"
      
      - name: "development"
        key: "dev-api-key-12345-insecure"
        role: "user"
        description: "Development key (DO NOT USE IN PRODUCTION)"
    
    # Public endpoints (no authentication required)
    public_endpoints:
      - "/health"
      - "/healthz"
      - "/version"
      - "/_info"

# PostgreSQL Database Configuration
database:
  host: "localhost"
  port: 5436  # External port (mapped from container's 5432)
  name: "mcp"
  schema: "mcp_smoke"
  user: "mcp"
  password: "${DB_PASSWORD}"  # Set in .env
  pool_size: 10
  max_overflow: 20

# StorageGrid Configuration
storagegrid:
  endpoint: "${STORAGEGRID_ENDPOINT}"
  access_key: "${STORAGEGRID_ACCESS_KEY}"
  secret_key: "${STORAGEGRID_SECRET_KEY}"
  bucket_name: "${STORAGEGRID_BUCKET}"
  region: "us-east-1"

# Oracle Database Configuration (for exports)
oracle:
  host: "${ORACLE_HOST}"
  port: 1521
  service_name: "${ORACLE_SERVICE}"
  user: "${ORACLE_USER}"
  password: "${ORACLE_PASSWORD}"

# MySQL Database Configuration (for exports)
mysql:
  host: "${MYSQL_HOST}"
  port: 3306
  database: "${MYSQL_DATABASE}"
  user: "${MYSQL_USER}"
  password: "${MYSQL_PASSWORD}"

# Smoke Test Configuration
smoke_test:
  # Test file paths
  tests_dir: "./tests"
  uploads_dir: "./uploads"
  reports_dir: "./reports"
  
  # Report configuration
  report:
    format: "html"  # html, csv, or both
    max_rows_display: 100  # Max mismatches to show in HTML
    include_summary: true
    
  # File cleanup
  cleanup:
    enabled: true
    retention_days: 30  # Delete test files older than 30 days

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "text"  # text or json
  
# Feedback System
feedback:
  enabled: true
  github:
    enabled: true
    repo: "aviciot/mcp_smoke_test"
    token: "${GITHUB_TOKEN}"  # Set in .env for feedback creation

